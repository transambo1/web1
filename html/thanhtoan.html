<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Thanh toán</title>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
	<link rel="stylesheet" href="../css/index.css">
	<link rel="stylesheet" href="../css/giohang.css">
	<link rel="stylesheet" href="../css/thanhtoan.css">
</head>


<body>
 <!--------------------------Bắt đầu Header--------------------------------------------------->
 <div class="container">
    <nav>
      <div class="logo">
        <a href="../html/indexlogin.html"><img src="../img/banner/logoo.png" alt="Logo" height="120px" width="120px"></a>
      </div>
      <ul>
        <li><a href="#">TÁC GIẢ</a></li>
        <li class="theloai"><a href="#">THỂ LOẠI</a>
          <div class="menuu">
            <ul>
              <li><a href="../html/kynangsong1.html">Kỹ năng sống - Phát triển cá nhân</a></li>
              <li><a href="../html/manga.html">Manga – Comic</a></li>
              <li><a href="../html/Nghệ thuật - Văn hóa.html">Nghệ thuật – Văn hóa</a></li>
            </ul>
          </div>
        </li>
        <li><a href="#">SÁCH MỚI</a></li>
        <li><a href="#">KHUYẾN MÃI</a></li>
      </ul>
      <div class="box">
        <input type="checkbox" id="check">
        <div class="search-box">
          <input type="text" placeholder="Tìm kiếm">
          <label for="check" class="icon">
            <a href="../html/notfound.html"><i class="fas fa-search"></i></a>
          </label>
        </div>
      </div>
      <div class="buttons">
        <a href="../html/lichsumuahang.html" class="login"><img
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAkpJREFUSEvl1knIjVEcx/HPS+aNcWVnYSND5lKmiNgQC2RFyZBMCymlWFjItEBSNkRKSUJIFBtTkSHWZCEkRZGp/9u59bzPe+99njvUu3B2955zft/zH87vPB16aHT0EFcz4N4Yhynp0A/xHL8bCaJR8DIcxcgc5C0243JZeCPgw9haIHwIO8rAy4Ln42YSfIRdeJJ+T8L+TOrn4k4RvCz4FualWk7Gz5xwXzzGWFzHonaAe+Eb+mMTjtcQ3Yhj+Ioh+FMPXibi6OBnSWQxrtUQjCivprkxeNUqODr4XRJZhfM1BFfiXJqLPe9bBcf+TxiKel17ENvxESPaUePQ2IfdySSW4kpOeAkuIsxlD/a2CxyN9RKjkuD91MV9UifPTP+/Sa6W7/pu5yjTXJVN0WRnE6haQGGbUec4YOFoBBxicbU2YAGm41eKPO7uyaIrlD1No+DCSMouKAsehhmYhnCufjnAjxT5A0T9PxcdoAg8GAewltJP6N+U9p3JxaqeoR54OU5geGbn9+Ri1bx6PAZm1n7AelyqRq4Fjkc+0laZP40jeIGIqJZWPBJbsCYtiLVTUxm67KkGjpcmrsZoRIQLca+oZrn5WcnTIwOvEdnokqVq4LDFbUloHU41CK0sjzRHqWJ0s9pq4IhyAG6kaJvkdm67jfgwCM1B9e5xXJsw+RgrcKEVKlbjTNKIN/pLRS8f8cTMJ03UNqJuZWTf6LDc6J3OkQfPznwvzcHdVqioqZcHh2FMSLCn2dQ0eYCaekXO1SSveNv/B/4HUH5pHwh1c9gAAAAASUVORK5CYII=" />
            <span class="tooltip">
              <p style="padding-top: 5px; text-align: center; font-weight: bold;">Thanh</p>
              <button>Lịch sử mua hàng</button>
              <button>Đăng xuất</button>
            </span> </a></div>
        <a href="../html/giohang.html" class="cart">
          <img
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAXRJREFUSEvt1r9LVlEcx/GX4Kbg6iRSkG4m4pZRQ2OCm4Tg/9AgKE6Co+i/ENLgEgRBS5CUm4I4BWKSe+DSmsSR88jj7V7v90TwODxnO+d8zud9vz+4fAf0aA30iOtfwIOYxkz+6CMc43dJECXgpF3FCkYqkEtsYCcKLwHvYqnFeBuvI/Ao+BXeZsOLbP4l759hC2N5/wKf2uBR8Hc8QErpI/ysGI/iDEM4wNz/AD/MpslrHZsNpul8DVe5B37dBY9E/ARfs8lLfGgwnMf7fDeL1O2NKwJONfycHZ5jv8Etqrt+XgUP4yTXs61MJffnmMJN+qvg1BSdbi0xjmifdpXsr4i70/UGPzCO5ezcOasD1em6z26VqRpxXZ2itSt6e6/Bkfo1aRqzFYm4Dy7JQD/VN7/bfnNF/1LRBrv/zTWJb9FwCnUTOO28qRsE3mGh0LRNvofFblEdOJ2lMeZxzaDQBqjep/nrEB+rF5HRpxQW0vcM/AcLDWsfXKwkoAAAAABJRU5ErkJggg==" />
          <span>&nbsp;1&nbsp;</span>
        </a>
      
    </nav>
    <!-----------------------------------Kết thúc Header--------------------------------------------------->
		
	<div class="left">
		<h3>ĐỊA CHỈ GIAO HÀNG</h3>
		<a href="../html/thanhtoan copy.html">
			<p style="font-size: 17px; margin: 20px 0;">Chọn địa chỉ từ tài khoản</p>
		</a>
		<form id="checkoutForm">
			<label for="name">Họ và tên người nhận</label>
			<input type="text" id="name" name="name" placeholder="Nhập họ và tên người nhận" required>
			
			<label for="email">Email</label>
			<input type="text" id="email" name="email" placeholder="Nhập email" required>
			
			<label for="phone">Số điện thoại</label>
			<input type="text" id="phone" name="phone" placeholder="Ví dụ: 0934686xxx" required>
			
			<label for="address">Địa chỉ nhận hàng</label>
			<input type="text" id="address" name="address" placeholder="Nhập địa chỉ nhận hàng" required>

			<h3>PHƯƠNG THỨC THANH TOÁN</h3>
			
				<div class="payment-methods">
                    <input type="radio" id="zalopay" name="paymentMethod" value="zalopay" required>
                    <label for="zalopay">
                        &nbsp;<img src="../img/banner/zalopay.png" alt="Zalo Pay">&nbsp;&nbsp;Zalo Pay
                    </label><br>
                    <input type="radio" id="momo" name="paymentMethod" value="momo">
                    <label for="momo">
                        &nbsp;<img src="../img/banner/momo.jpg" alt="Momo">&nbsp;&nbsp;Momo
                    </label><br>
                    <input type="radio" id="atm" name="paymentMethod" value="atm">
                    <label for="atm">
                        &nbsp;<img src="../img/banner/atm.png" alt="ATM">&nbsp;&nbsp;ATM
                    </label><br>
					<div id="cardInfo" style="display: none; margin-top: 20px;">
						<h4>Thông Tin Thẻ ATM</h4>
						<label for="cardNumber">Số thẻ</label>
						<input type="text" id="cardNumber" name="cardNumber" placeholder="Nhập số thẻ" maxlength="16">
					
						<label for="cardHolder">Tên chủ thẻ</label>
						<input type="text" id="cardHolder" name="cardHolder" placeholder="Nhập tên chủ thẻ">
					
						<label for="expiryDate">Ngày hết hạn</label>
						<input type="month" id="expiryDate" name="expiryDate">
					
						<label for="cvv">CVV</label>
						<input type="password" id="cvv" name="cvv" placeholder="Nhập CVV" maxlength="3">
					</div>
                    <input type="radio" id="cash" name="paymentMethod" value="cash">
                    <label for="cash">Thanh toán bằng tiền mặt</label><br>
                </div>

			<div class="checkout-button">
				<input type="submit" value="Xác Nhận !" class="checkout-btn">
			</div>
		</form>
		</div>
			</div>
				<div class="fixed-buttons-container">
					<div class="back-to-cart">
						<a href="../html/indexlogin.html">
							<span>
								<img
									src="https://cdn0.fahasa.com/skin/frontend/ma_vanese/fahasa/images/btn_back.svg?q=10354">
							</span>
							<span>Trở về trang chủ</span>
						</a>
					</div>
	
	    <!-----------------------------------Bắt đầu Footer------------------------------------------->
		<section class="contact" id="contact">
			<h2>Liên hệ với chúng tôi</h2>
			<p>Hãy liên hệ với chúng tôi nếu có bất kỳ thắc mắc hoặc phản hồi nào.</p>
			<p>
			  -----------------------------------------------------------------------------------------------------------------
			</p>
			<div class="contact-details">
			  <div class="left-column">
				<p><i class="fas fa-map-marker-alt"></i> 273 An Dương Vương, Quận 5</p>
				<p><i class="fas fa-envelope"></i> HAT2004@gmail.com</p>
				<p><i class="fas fa-phone"></i> (84) 796553739</p>
			  </div>
			  <div class="right-column">
				<p><i class="fas fa-clock"></i> Thứ hai - Thứ bảy: 9:00 Sáng - 5:00 Chiều</p>
				<p><i class="fas fa-clock"></i> Chủ nhật: Đóng cửa</p>
				<p><i class="fas fa-globe"></i> www.hatbook.com</a></p>
			  </div>
			  <div class="getdetail">
				<h3>Nhận thông báo từ chúng tôi:</h3>
				<form>
				  <label for="emailInput">Email:</label>
				  <input type="email" id="emailInput" name="email" placeholder="Nhập địa chỉ email của bạn" required>
				  <input type="submit" value="Gửi">
				</form>
			  </div>
			</div>
		  </section>
		</div>
		</div>
		<footer>
		  <div>
			<span>Copyright © 2023 All Rights Reserved</span>
			<span class="link">
			  <a href="../html/index.html">Trang chủ</a>
			</span>
		  </div>
		</footer>
		<script>
			document.addEventListener('DOMContentLoaded', () => {
				const checkoutForm = document.getElementById('checkoutForm');
				const paymentMethods = document.getElementsByName('paymentMethod');
				const cardInfo = document.getElementById('cardInfo');
	
				// Hàm kiểm tra và hiển thị khung thông tin thẻ
				function toggleCardInfo() {
					const selectedMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
					if (selectedMethod === 'atm') {
						cardInfo.style.display = 'block';
					} else {
						cardInfo.style.display = 'none';
					}
				}
	
				// Gắn sự kiện khi chọn phương thức thanh toán
				paymentMethods.forEach(method => {
					method.addEventListener('change', toggleCardInfo);
				});
	
				if (checkoutForm) {
					checkoutForm.addEventListener('submit', function (event) {
						event.preventDefault(); // Ngăn chặn submit mặc định
	
						// Lấy giá trị từ các trường
						const name = document.getElementById('name').value;
						const email = document.getElementById('email').value;
						const phone = document.getElementById('phone').value;
						const address = document.getElementById('address').value;
						const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
	
						// Nếu chọn phương thức ATM, kiểm tra thêm thông tin thẻ
						let cardNumber = '';
						let cardHolder = '';
						let expiryDate = '';
						let cvv = '';
	
						if (paymentMethod === 'atm') {
							cardNumber = document.getElementById('cardNumber').value.trim();
							cardHolder = document.getElementById('cardHolder').value.trim();
							expiryDate = document.getElementById('expiryDate').value;
							cvv = document.getElementById('cvv').value.trim();
	
							// Kiểm tra thông tin thẻ
							if (cardNumber === '' || cardHolder === '' || expiryDate === '' || cvv === '') {
								alert('Vui lòng nhập đầy đủ thông tin thẻ ATM.');
								return;
							}
	
							// Kiểm tra định dạng số thẻ và CVV
							const cardNumberPattern = /^\d{16}$/;
							const cvvPattern = /^\d{3}$/;
	
							if (!cardNumberPattern.test(cardNumber)) {
								alert('Số thẻ ATM phải gồm 16 chữ số.');
								return;
							}
	
							if (!cvvPattern.test(cvv)) {
								alert('CVV phải gồm 3 chữ số.');
								return;
							}
						}
	
						// Lưu trữ dữ liệu vào sessionStorage
						sessionStorage.setItem('checkoutName', name);
						sessionStorage.setItem('checkoutEmail', email);
						sessionStorage.setItem('checkoutPhone', phone);
						sessionStorage.setItem('checkoutAddress', address);
						sessionStorage.setItem('paymentMethod', paymentMethod);
	
						if (paymentMethod === 'atm') {
							sessionStorage.setItem('cardNumber', cardNumber);
							sessionStorage.setItem('cardHolder', cardHolder);
							sessionStorage.setItem('expiryDate', expiryDate);
							sessionStorage.setItem('cvv', cvv);
						}
	
						// Chuyển hướng đến trang xác nhận
						window.location.href = 'xacnhanthanhtoan.html';
					});
				} else {
					console.log('Form không tồn tại');
				}
			});
		</script>
	  </body>
	  
	  
	  </html>